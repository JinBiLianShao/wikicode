!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LgZoom=e()}(function(){return function r(l,i,a){function s(o,e){if(!i[o]){if(!l[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(n)return n(o,!0);e=new Error("Cannot find module '"+o+"'");throw e.code="MODULE_NOT_FOUND",e}t=i[o]={exports:{}};l[o][0].call(t.exports,function(e){var t=l[o][1][e];return s(t||e)},t,t.exports,r,l,i,a)}return i[o].exports}for(var n="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,o){var r,l;r=this,l=function(){"use strict";function e(e){return this.el=e,this.core=window.lgData[this.el.getAttribute("lg-uid")],this.core.s=t({},o,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)),this}var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,r=arguments[t];for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},o={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300};e.prototype.init=function(){function r(e,t,o,r){var l=t.clientWidth,o=i.core.s.dynamic?i.core.s.dynamicEl[o].width||t.naturalWidth||l:i.core.items[o].getAttribute("data-width")||t.naturalWidth||l;utils.hasClass(i.core.outer,"lg-zoomed")?a=1:l<o&&(a=o/l||2),r?(i.pageX=window.innerWidth/2,i.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)):(i.pageX=e.pageX||e.targetTouches[0].pageX,i.pageY=e.pageY||e.targetTouches[0].pageY),s(),setTimeout(function(){utils.removeClass(i.core.outer,"lg-grabbing"),utils.addClass(i.core.outer,"lg-grab")},10)}var i=this,e='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>',a=(i.core.s.actualSize&&(e+='<span id="lg-actual-size" class="lg-icon"></span>'),this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend",e),utils.on(i.core.el,"onSlideItemLoad.lgtmzoom",function(e){var t=i.core.s.enableZoomAfter+e.detail.delay;utils.hasClass(document.body,"lg-from-hash")&&e.detail.delay?t=0:utils.removeClass(document.body,"lg-from-hash"),i.zoomabletimeout=setTimeout(function(){utils.addClass(i.core.___slide[e.detail.index],"lg-zoomable")},t+30)}),1),t=function(e){var t=i.core.outer.querySelector(".lg-current .lg-image"),o=(window.innerWidth-t.clientWidth)/2,r=(window.innerHeight-t.clientHeight)/2+(document.documentElement.scrollTop||document.body.scrollTop),o=(e-1)*(i.pageX-o),r=(e-1)*(i.pageY-r);utils.setVendor(t,"Transform","scale3d("+e+", "+e+", 1)"),t.setAttribute("data-scale",e),t.parentElement.style.left=-o+"px",t.parentElement.style.top=-r+"px",t.parentElement.setAttribute("data-x",o),t.parentElement.setAttribute("data-y",r)},s=function(){1<a?utils.addClass(i.core.outer,"lg-zoomed"):i.resetZoom(),t(a=a<1?1:a)},l=!1;utils.on(i.core.el,"onAferAppendSlide.lgtmzoom",function(e){var t=e.detail.index,o=i.core.___slide[t].querySelector(".lg-image");i.core.isTouch||utils.on(o,"dblclick",function(e){r(e,o,t)}),i.core.isTouch&&utils.on(o,"touchstart",function(e){l?(clearTimeout(l),l=null,r(e,o,t)):l=setTimeout(function(){l=null},300),e.preventDefault()})}),utils.on(window,"resize.lgzoom scroll.lgzoom orientationchange.lgzoom",function(){i.pageX=window.innerWidth/2,i.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop),t(a)}),utils.on(document.getElementById("lg-zoom-out"),"click.lg",function(){i.core.outer.querySelector(".lg-current .lg-image")&&(a-=i.core.s.scale,s())}),utils.on(document.getElementById("lg-zoom-in"),"click.lg",function(){i.core.outer.querySelector(".lg-current .lg-image")&&(a+=i.core.s.scale,s())}),utils.on(document.getElementById("lg-actual-size"),"click.lg",function(e){r(e,i.core.___slide[i.core.index].querySelector(".lg-image"),i.core.index,!0)}),utils.on(i.core.el,"onBeforeSlide.lgtm",function(){a=1,i.resetZoom()}),i.core.isTouch||i.zoomDrag(),i.core.isTouch&&i.zoomSwipe()},e.prototype.resetZoom=function(){utils.removeClass(this.core.outer,"lg-zoomed");for(var e=0;e<this.core.___slide.length;e++)this.core.___slide[e].querySelector(".lg-img-wrap")&&(this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("style"),this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-x"),this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-y"));for(var t=0;t<this.core.___slide.length;t++)this.core.___slide[t].querySelector(".lg-image")&&(this.core.___slide[t].querySelector(".lg-image").removeAttribute("style"),this.core.___slide[t].querySelector(".lg-image").removeAttribute("data-scale"));this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)},e.prototype.zoomSwipe=function(){for(var r=this,l={},i={},a=!1,s=!1,n=!1,e=0;e<r.core.___slide.length;e++)utils.on(r.core.___slide[e],"touchstart.lg",function(e){var t;utils.hasClass(r.core.outer,"lg-zoomed")&&(t=r.core.___slide[r.core.index].querySelector(".lg-object"),n=t.offsetHeight*t.getAttribute("data-scale")>r.core.outer.querySelector(".lg").clientHeight,(s=t.offsetWidth*t.getAttribute("data-scale")>r.core.outer.querySelector(".lg").clientWidth)||n)&&(e.preventDefault(),l={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY})});for(var t=0;t<r.core.___slide.length;t++)utils.on(r.core.___slide[t],"touchmove.lg",function(e){var t,o;utils.hasClass(r.core.outer,"lg-zoomed")&&(t=r.core.___slide[r.core.index].querySelector(".lg-img-wrap"),e.preventDefault(),a=!0,i={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},utils.addClass(r.core.outer,"lg-zoom-dragging"),e=n?-Math.abs(t.getAttribute("data-y"))+(i.y-l.y):-Math.abs(t.getAttribute("data-y")),o=s?-Math.abs(t.getAttribute("data-x"))+(i.x-l.x):-Math.abs(t.getAttribute("data-x")),15<Math.abs(i.x-l.x)||15<Math.abs(i.y-l.y))&&(t.style.left=o+"px",t.style.top=e+"px")});for(var o=0;o<r.core.___slide.length;o++)utils.on(r.core.___slide[o],"touchend.lg",function(){utils.hasClass(r.core.outer,"lg-zoomed")&&a&&(a=!1,utils.removeClass(r.core.outer,"lg-zoom-dragging"),r.touchendZoom(l,i,s,n))})},e.prototype.zoomDrag=function(){for(var r=this,l={},i={},a=!1,s=!1,n=!1,c=!1,e=0;e<r.core.___slide.length;e++)utils.on(r.core.___slide[e],"mousedown.lgzoom",function(e){var t=r.core.___slide[r.core.index].querySelector(".lg-object");c=t.offsetHeight*t.getAttribute("data-scale")>r.core.outer.querySelector(".lg").clientHeight,n=t.offsetWidth*t.getAttribute("data-scale")>r.core.outer.querySelector(".lg").clientWidth,utils.hasClass(r.core.outer,"lg-zoomed")&&utils.hasClass(e.target,"lg-object")&&(n||c)&&(e.preventDefault(),l={x:e.pageX,y:e.pageY},a=!0,r.core.outer.scrollLeft+=1,--r.core.outer.scrollLeft,utils.removeClass(r.core.outer,"lg-grab"),utils.addClass(r.core.outer,"lg-grabbing"))});utils.on(window,"mousemove.lgzoom",function(e){var t,o;a&&(t=r.core.___slide[r.core.index].querySelector(".lg-img-wrap"),s=!0,i={x:e.pageX,y:e.pageY},utils.addClass(r.core.outer,"lg-zoom-dragging"),e=c?-Math.abs(t.getAttribute("data-y"))+(i.y-l.y):-Math.abs(t.getAttribute("data-y")),o=n?-Math.abs(t.getAttribute("data-x"))+(i.x-l.x):-Math.abs(t.getAttribute("data-x")),t.style.left=o+"px",t.style.top=e+"px")}),utils.on(window,"mouseup.lgzoom",function(e){a&&(a=!1,utils.removeClass(r.core.outer,"lg-zoom-dragging"),!s||l.x===i.x&&l.y===i.y||(i={x:e.pageX,y:e.pageY},r.touchendZoom(l,i,n,c)),s=!1),utils.removeClass(r.core.outer,"lg-grabbing"),utils.addClass(r.core.outer,"lg-grab")})},e.prototype.touchendZoom=function(e,t,o,r){var l=this,i=l.core.___slide[l.core.index].querySelector(".lg-img-wrap"),a=l.core.___slide[l.core.index].querySelector(".lg-object"),s=-Math.abs(i.getAttribute("data-x"))+(t.x-e.x),n=-Math.abs(i.getAttribute("data-y"))+(t.y-e.y),c=(l.core.outer.querySelector(".lg").clientHeight-a.offsetHeight)/2,u=Math.abs(a.offsetHeight*Math.abs(a.getAttribute("data-scale"))-l.core.outer.querySelector(".lg").clientHeight+c),d=(l.core.outer.querySelector(".lg").clientWidth-a.offsetWidth)/2,a=Math.abs(a.offsetWidth*Math.abs(a.getAttribute("data-scale"))-l.core.outer.querySelector(".lg").clientWidth+d);(15<Math.abs(t.x-e.x)||15<Math.abs(t.y-e.y))&&(r&&(n<=-u?n=-u:-c<=n&&(n=-c)),o&&(s<=-a?s=-a:-d<=s&&(s=-d)),r?i.setAttribute("data-y",Math.abs(n)):n=-Math.abs(i.getAttribute("data-y")),o?i.setAttribute("data-x",Math.abs(s)):s=-Math.abs(i.getAttribute("data-x")),i.style.left=s+"px",i.style.top=n+"px")},e.prototype.destroy=function(){var e=this;utils.off(e.core.el,".lgzoom"),utils.off(window,".lgzoom");for(var t=0;t<e.core.___slide.length;t++)utils.off(e.core.___slide[t],".lgzoom");utils.off(e.core.el,".lgtmzoom"),e.resetZoom(),clearTimeout(e.zoomabletimeout),e.zoomabletimeout=!1},window.lgModules.zoom=e},void 0!==o?l():(l(),r.lgZoom={})},{}]},{},[1])(1)});